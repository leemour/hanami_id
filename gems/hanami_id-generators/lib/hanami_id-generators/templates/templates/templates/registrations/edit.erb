<div class="passwordBox animated fadeIn">
  <div class="row edit-profile">
    <div class="col-md-12">
      <div class="ibox-content">
        <h1 class="font-bold text-center">
          <%= t('user.settings') %>
        </h1>
        <hr />
        <div class="row">
          <div class="col-lg-12">
            <div class="hidden">
              <% _slim_controls1 = form_for :avatar, url: avatar_user_path(current_user),
                                            method: 'patch',
                                            remote: true,
                                            html: { multipart: true, class: 'user-avatar' } do |f|%>
                <%= f.file_field :avatar, id: 'upload-avatar-field' %>
                <%= f.submit class: 'submit-btn' %>
            <% end %>
            <%= t(_slim_controls1) %></div>
          <% _slim_controls2 = form_for(resource, as: resource_name, url: user_registration_path, html: { method: :put }) do |f| %>
          <div class="form-group primary-info-box">
            <div class="row">
              <div class="col-xs-5 col-xs-offset-2 text-left">
                <h2 class="user-name pull-right"><%= t(resource.full_name) %>
                </h2>
                <span class="label label-primary pull-right"><%= t(resource.t_enum(:role) %>
                </span></div>
              <div class="col-xs-4 avatar-section">
                <div class="img-container"<% _slim_codeattributes1 = t('actions.upload'); if _slim_codeattributes1; if _slim_codeattributes1 == true %> title=""<% else %> title="<%= t(_slim_codeattributes1) %>"<% end; end %>>
                  <% if current_user.avatar.present? %>
                  <%= t(image_tag current_user.avatar_url(:small), class: 'img-avatar img-responsive') %>
                <% else %>
                <%= t(image_tag 'avatar.png', class: 'img-avatar img-responsive') %>
              <% end %><i aria-hidden="true" class="fa fa-upload">
              </i></div>
          </div>
        </div>
      </div>
      <hr />
      <%= t(devise_error_messages!) %>
      <div class="form-group">
        <%= t(f.label :email) %>
        <%= t(f.email_field :email, class: 'form-control', autofocus: true) %>
        <%= t(f.error_span(:email) %>
      </div>
      <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
      <div>
        <%= t(t('devise.registrations.awainting_confirmation') %>
        <%= t(resource.unconfirmed_email) %>
      </div>
    <% end %>
    <div class="form-group">
      <%= f.label :password %>
      <span class="help-block m-b-none">
        <%= t('devise.registrations.leave_blank') %>
      </span><%= f.password_field :password, class: 'form-control', autocomplete: "off" %>
      <%= f.error_span(:password) %>
    </div>
    <div class="form-group">
      <%= f.label :password_confirmation %>
      <%= f.password_field :password_confirmation, class: 'form-control', autocomplete: "off" %>
      <%= f.error_span(:password_confirmation) %>
    </div>
    <div class="form-group">
      <%= f.label :current_password %>
      <span class="help-block m-b-none">
        <%= t('devise.registrations.current_password_required') %>
      </span><%= f.password_field :current_password, class: 'form-control', autocomplete: "off" %>
      <%= f.error_span(:current_password) %>
    </div>
    <div class="actions">
      <%= f.submit t('user.update'), class: "btn btn-primary col-md-8" %>
      <%= link_to t('common.back'), :back, class: 'btn btn-default btn-md col-md-3 col-md-offset-1' %>
    </div>
  <% end %><%= _slim_controls2 %></div>
        </div>
      </div>
    </div>
  </div>
</div>
