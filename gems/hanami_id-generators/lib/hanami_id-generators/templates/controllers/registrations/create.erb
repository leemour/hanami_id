        def initialize(operation: Interactors::Registrations::Create.new)
          @operation = operation
        end

        params do
          required(:<%= HanamiId.model_name %>).schema do
            required(:email) { filled? & str? & format?(URI::MailTo::EMAIL_REGEXP) }
            required(:password) { filled? & str? & size?(6..64) }
          end
        end

        def call()
          if params.valid?
            <%= HanamiId.model_name %> = @operation.call(params[:<%= HanamiId.model_name %>])
            params.env["warden"].set_user(<%= HanamiId.model_name %>)
            redirect_to routes.root_path
          else
            self.status = 422
          end
        end